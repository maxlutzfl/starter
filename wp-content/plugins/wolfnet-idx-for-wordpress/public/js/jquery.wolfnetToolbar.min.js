!function(a){var b="wolfnetToolbar",c=b+".state",d=b+".options",e="wolfnet.updated",f="wolfnet.updating",g="a.wolfnet_page_nav_next",h="a.wolfnet_page_nav_prev",i="wolfnet_page_items_select",j="wolfnet_sortoptions",k={sort:"price_desc",maxResults:250,criteria:{},itemsPerPageData:[5,10,15,20,25,30,35,40,45,50],sortOptionsData:[{value:"price_desc",label:"Descending by Price"},{value:"price",label:"Ascending by Price"}]},l=function(b){b=a.isArray(b.responseData.data.listing)?b.responseData.data.listing:[];for(var c=this,d=a("<div>").addClass("wolfnet_listings"),e=0,f=b.length;e<f;e++){var g=b[e].city+", "+b[e].state,h=b[e].display_address+", "+g,i=a("<div>").attr("id","wolfnet_listing_"+b[e].property_id).addClass("wolfnet_listing").appendTo(d),j=a("<a>").attr({href:b[e].property_url,title:h}).appendTo(i);a("<span>").addClass("wolfnet_price").attr("itemprop","price").html(b[e].listing_price.toString()).appendTo(j),a("<span>").addClass("wolfnet_full_address").attr("itemprop","street-address").html(h).appendTo(j)}c.find(".wolfnet_listings").replaceWith(d)},m=function(b){var c=a.isArray(b.responseData.data.listing)?b.responseData.data.listing:[],d=b.responseData.data.hasOwnProperty("templates")?b.responseData.data.templates:{},e=this,f=a("<div>").addClass("wolfnet_listings");if(d.hasOwnProperty("listing"))for(var g=0,h=c.length;g<h;g++)f.append(n(c[g],d.listing));e.find(".wolfnet_listings").replaceWith(f)},n=function(b,c){var d=a(c);d.attr("id",b.property_id),d.find("a.wolfnet_listingLink").attr("href",b.property_url),d.find(".wolfnet_listingImage img").attr({src:b.thumbnail_url,alt:"Property for sale at "+b.address,"data-photo-url":b.thumbnails_url}),d.find(".wolfnet_price").attr("title",b.listing_price).text(b.listing_price),d.find(".wolfnet_bed_bath").attr("title",b.bedsbaths_full),b.total_bedrooms&&(d.find(".wolfnet_beds").text(b.total_bedrooms).show(),b.total_baths&&d.find(".wolfnet_bed_bath .wolfnet_info_separator").show()),b.total_baths&&d.find(".wolfnet_baths").text(b.total_baths).show(),d.find(".wolfnet_locationInfo").attr("title",b.address),d.find(".wolfnet_address").text(b.display_address),d.find(".wolfnet_location").text(b.location),d.find(".wolfnet_full_address").text(b.address);var e=d.find(".wolfnet_branding"),f=e.find(".wolfnet_brokerLogo");return"idx"!==b.branding.type||f.is(".wolfnet_idxLogo")||f.addClass("wolfnet_idxLogo"),""!==a.trim(b.branding.logo)&&f.show().find("img").first().attr("src",b.branding.logo),e.find(".wolfnet_brandingCourtesyText").html(b.branding.courtesy_text),e.find(".wolfnet_brandingAgent.wolfnet_brandingAgentName").html(b.branding.agent_name),e.find(".wolfnet_brandingAgent.wolfnet_brandingAgentPhone").html(b.branding.agent_phone),e.find(".wolfnet_brandingOffice.wolfnet_brandingOfficeName").html(b.branding.office_name),e.find(".wolfnet_brandingOffice.wolfnet_brandingOfficePhone").html(b.branding.office_phone),e.find(".wolfnet_brandingTollFreePhone").html(b.branding.toll_free_phone),d},o=function(b){var c=a.isArray(b.responseData.data.listing)?b.responseData.data.listing:[],d=b.responseData.data.hasOwnProperty("templates")?b.responseData.data.templates:{},e=this,f=e.find(".wolfnet_wntMainMap").data("map"),g=wolfnet_ajax.houseoverIcon;f.removeAllShapes();for(var h=0,i=c.length;h<i;h++){var j=d.hasOwnProperty("map")?n(c[h],d.map).get(0):"";if((0!==c[h].geo.lat||0!==c[h].geo.lng)&&(!isNaN(c[h].geo.lat)||!isNaN(c[h].geo.lng))&&(""!==c[h].geo.lat||""!==c[h].geo.lng)&&c[h].geo.lat>=-180&&c[h].geo.lat<=180&&c[h].geo.lng>=-180&&c[h].geo.lng<=180){var k=f.mapIcon(g,20,20),l=f.poi(c[h].geo.lat,c[h].geo.lng,k,j,c[h].property_id,c[h].property_url),m=50;c[h].geo.lat>=f.getBounds().lr.lat-m&&c[h].geo.lat<=f.getBounds().ul.lat+m&&c[h].geo.lng>=f.getBounds().lr.lng-m&&c[h].geo.lng<=f.getBounds().ul.lng+m&&f.addPoi(l)}}f.bestFit()},p=function(a){var b=this;(b.is(".wolfnet_propertyList")||b.is(".wolfnet_listingGrid"))&&b.find(".wolfnet_listings").children().remove(),b.is(".wolfnet_propertyList")?l.call(b,a):b.is(".wolfnet_listingGrid")&&(m.call(b,a),b.wolfnetListingGrid("refresh")),b.find(".wolfnet_wntMainMap").length>0&&o.call(b,a),b.trigger(e)},q=function(){var b=a(this),e=b.find("span."+i),f=b.data(c),g=b.data(d);if(0===e.length&&b.is(".wolfnet_withPagination")){var h=a("<select>");h.change(function(){f.numrows=a(this).val(),f.page=(f.startrow+(f.numrows-1))/f.numrows,b.data(c,f),b.find("span."+i+" select").val(f.numrows),t.update.call(b)});for(var j=0,k=g.itemsPerPageData.length;j<k;j++){var l=g.itemsPerPageData[j];a("<option>").attr("value",l).text(l).appendTo(h)}e=a("<span>").addClass(i),e.append(h).append("per page"),e.appendTo(b.find(".wolfnet_toolbar .wolfnet_page_items"))}b.find("span."+i+" select").each(function(){a(this).val(Number(f.numrows))})},r=function(){var b=a(this),e=b.find("span."+j+" select"),f=b.data(c),g=b.data(d);if(0===e.length&&b.is(".wolfnet_withSortOptions")){var h=a("<select>");h.change(function(){f.sort=a(this).val(),b.data(c,f),b.find("span."+j+" select").val(f.sort),t.update.call(b)});for(var i=0,k=g.sortOptionsData.length;i<k;i++){var l=g.sortOptionsData[i];a("<option>").text(l.label).attr("value",l.value).appendTo(h)}e=a("<span>").addClass(j),e.append(h),e.appendTo(b.find(".wolfnet_toolbar .wolfnet_page_info"))}b.find("span."+j+" select").each(function(){a(this).val(f.sort)})},s=function(b){var e=a(this),f=e.find(g),i=e.find(h),j=e.data(c),k=(e.data(d),j.total_rows<j.maxresults?j.total_rows:j.maxresults),l=Math.ceil(k/j.numrows);j.page<=1?i.addClass("wolfnet_disabled"):i.removeClass("wolfnet_disabled"),j.page>=l?f.addClass("wolfnet_disabled"):f.removeClass("wolfnet_disabled");var m=Number(j.startrow)-1+Number(j.numrows);return Number(k)<m&&(m=Number(k)),e.find(".wolfnet_page_start").text(j.startrow),e.find(".wolfnet_page_end").text(m),a("html,body").scrollTop(e.find(".wolfnet_toolbar").offset().top-100),e.is(".wolfnet_listingGrid")&&e.wolfnetListingGrid&&e.wolfnetListingGrid("refresh",!0),e.removeClass("wolfnet_refreshing"),!0},t={init:function(b){return this.each(function(){var f=a(this),i=a.extend(!0,{},k,b),j=a.extend(!0,{},i.criteria,i,{page:1});delete i.criteria,delete j.criteria,delete j.prices,delete j.ownertypes,delete j.savedsearches;for(var l in j){var m=l.indexOf("_wpname")!==-1,n=l.indexOf("_wpid")!==-1,o=l.indexOf("_wpc")!==-1,p=l.indexOf("_wps")!==-1;(m||n||o||p)&&delete j[l]}j.maxresults=i.maxResults,a.inArray(Number(j.numrows),i.itemsPerPageData)===-1&&i.itemsPerPageData.push(Number(j.numrows)),i.itemsPerPageData.sort(function(a,b){return a-b}),f.data(d,i),f.data(c,j),q.call(f),r.call(f),f.click(function(b){var c=a(b.target);return c.is(g)||c.parent().is(g)?(b.preventDefault(),t.next.call(f),!1):!c.is(h)&&!c.parent().is(h)||(b.preventDefault(),t.prev.call(f),!1)}),f.on(e,s)})},update:function(){return this.each(function(){var b=a(this),d=b.data(c),e=function(){var b=a.extend(d,{});return delete b.itemsPerPageData,delete b.sortOptionsData,a.extend(d,{action:"wolfnet_get_listings"})};a.ajax({url:wolfnet_ajax.ajaxurl,dataType:"jsonp",data:e(),beforeSend:function(a){b.addClass("wolfnet_refreshing").trigger(f)}}).done(function(a,c,d){p.call(b,a)}).fail(function(a,c){b.removeClass("wolfnet_refreshing")}).always(function(){})})},next:function(){return this.each(function(){var b=a(this),d=b.data(c),e=d.page+1;t.page.call(b,e)})},prev:function(){return this.each(function(){var b=a(this),d=b.data(c),e=d.page-1;t.page.call(b,e)})},page:function(b){return this.each(function(){var e=a(this),f=e.data(d),g=e.data(c),h=Math.ceil(f.maxResults/Number(g.numrows)),i=b;i<1?i=h:i>h&&(i=1);var j=(i-1)*Number(g.numrows)+1;e.data(c,a.extend(g,{page:i,startrow:j})),t.update.call(e)})}};a.fn[b]=function(b){return t[b]?t[b].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof b&&b?void a.error("Method "+b+" does not exist on jQuery."+pluginName):t.init.apply(this,arguments)}}(jQuery);
//# sourceMappingURL=jquery.wolfnetToolbar.min.js.map