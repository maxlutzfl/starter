"undefined"!==typeof jQuery&&function(f,m,n,i){var l={keyid:"",containerClass:"wnt-thumbnail-scroller",controlBtnClass:"wnt-nav-btn",hideClass:"wolfnet_hidden",hidableCtrlClass:"wnt-hidable-controls",loaderClass:"wnt-thumbnails-loader",loadingClass:"wnt-thumbnails-loading",photoType:"thumb_url",hideControls:!0,controlWidth:20,controlMinWidth:15,controlMinWidthOffset:2,controlsClass:"wnt-controls",iconClass:"wnt-icon",nextBtnClass:"wnt-next",prevBtnClass:"wnt-prev",nextIconClass:"wnt-icon-caret-right",
prevIconClass:"wnt-icon-caret-left",photoSelector:".primary-photo",extraButtonClass:"",photoUnavailable:"",resizing:!1,resizeTimeout:null},b={"public":{init:function(a){var c=f.extend({},l,a);this.each(function(){var a=f(this);a.data("wnt.wolfnetThumbnailScroller")===i&&(b["private"].options(a,c),b["private"].setupDomElements(a),b["private"].setupEventHandlers(a))});return this},next:function(){return b["public"].changeImage.call(this,"next")},previous:function(){return b["public"].changeImage.call(this,
"previous")},changeImage:function(a){a===i&&f.error("The direction argument to changeImage was expected but not received.");"next"!==a&&"previous"!==a&&f.error('The only directions supported by changeImage are "next" and "previous".');return this.each(function(){var c=f(this),e=b["private"].options(c),d=b["private"].state(c,"index")||0,g=b["private"].state(c,"photoMetadata")||null,h=b["private"].state(c,"$container"),i=h.height();if(null!==g&&1<g.length&&!b["private"].state(c,"transitioning")){b["private"].state(c,
"transitioning",!0);var k=h.find("img:visible:first"),j=0;switch(a){case "next":j=d+1>g.length-1?0:d+1;break;case "previous":j=0>d-1?g.length-1:d-1}g=g[j][e.photoType];h=h.find('img[src="'+g+'"]');0===h.length?(h=f("<img>").attr("src",g).attr("alt","property image").css("max-height",i+"px").hide().on("error",function(){f(this).attr("src",e.photoUnavailable)}).on("load",function(){b["private"].transitionPhotos(c,k,f(this),j)}),"next"==a&&0===j?f.error("Something when wrong. The 0 index photo should already be here."):
"previous"==a||0===d?h.insertAfter(k):h.insertBefore(k)):b["private"].transitionPhotos(c,k,h,j)}else b["private"].state(c,"photoMetadataLoaded")||b["private"].loadPhotoMetadata(c,function(){b["public"][a].call(c)})})},showControls:function(){return this.each(function(){var a=f(this),c=b["private"].options(a);b["private"].controls(a).removeClass(c.hideClass)})},hideControls:function(){return this.each(function(){var a=f(this),c=b["private"].options(a);b["private"].controls(a).addClass(c.hideClass)})}},
"private":{state:function(a,c,b){1<a.length&&f.error("The state method can only operate on a single element.");if(c!==i&&"string"===typeof c){var d=a.data("wnt.wolfnetThumbnailScroller")||{};b!==i&&(d[c]=b,d=a.data("wnt.wolfnetThumbnailScroller",d));return d[c]}c!==i&&a.data("wnt.wolfnetThumbnailScroller",c);return a.data("wnt.wolfnetThumbnailScroller")||{}},options:function(a,c){1<a.length&&f.error("The options method can only operate on a single element.");var e=b["private"].state(a,"options")||
{};c!==i&&(e=b["private"].state(a,"options",c));return e},setupDomElements:function(a){b["private"].wrapImageElement(a);b["private"].buildControls(a)},setupEventHandlers:function(a){a.each(function(){var c=f(this),a=b["private"].options(c);if("undefined"!==typeof wolfnet&&wolfnet.hasFeature("touch"))c.addClass("has-swipe").wolfnetSwipe({direction:"horizontal"}).on("wntSwipeLeft",function(){f(this).wolfnetThumbnailScroller("next")}).on("wntSwipeRight",function(){f(this).wolfnetThumbnailScroller("previous")});
a.hideControls&&c.hover(function(){b["private"].state(c,"mouseover",!0);b["private"].state(c,"photoMetadataLoaded")?1<b["private"].state(c,"photoMetadata").length&&b["public"].showControls.call(c):b["private"].loadPhotoMetadata(c,function(){b["private"].state(c,"mouseover")&&1<b["private"].state(c,"photoMetadata").length&&b["public"].showControls.call(c)})},function(){b["private"].state(c,"mouseover",!1);a.hideControls&&b["public"].hideControls.call(c)});b["private"].controls(c).click(function(a){b["private"].eventHandler.controlClick.call(this,
a,c)})})},wrapImageElement:function(a){a.each(function(){var a=f(this),e=b["private"].options(a),d=a.find(e.photoSelector).first(),d=f("<span>").addClass(e.containerClass).addClass(e.hideControls?e.hidableCtrlClass:"").insertBefore(d).append(d);b["private"].state(a,"$container",d);f("<span>").addClass(e.loaderClass).appendTo(d)})},buildControls:function(a){a.each(function(){var a=f(this),e=b["private"].state(a),d=b["private"].options(a),e=e.$container,g=b["private"].buildNavBtn(a,"next"),h=b["private"].buildNavBtn(a,
"prev");e.append(g).append(h);d.controlWidth=g.width();d.hideControls&&b["public"].hideControls.call(a)})},buildNavBtn:function(a,c){1<a.length&&f.error("The buildNavBtn method can only operate on a single element.");var e=b["private"].options(a),d=f("<span>").addClass(e.iconClass),g="";switch(c){case "next":d.addClass(e.nextIconClass);g=e.nextBtnClass;break;case "prev":d.addClass(e.prevIconClass),g=e.prevBtnClass}return f("<button>").addClass(e.controlBtnClass).addClass(e.extraButtonClass).addClass(g).append(d)},
controls:function(a){1<a.length&&f.error("The controls method can only operate on a single element.");var c=b["private"].state(a),a=b["private"].options(a);return c.$container.find("."+a.controlBtnClass)},loadPhotoMetadata:function(a,c){1<a.length&&f.error("The loadPhotoMetadata method can only operate on a single element.");var c=c||function(){},e=b["private"].state(a),d=b["private"].options(a);if(!e.loadingPhotos){b["private"].state(a,"loadingPhotos",!0);var g=a.find(d.photoSelector).first().data("photo-url");
f.ajax({url:g,dataType:"json",data:{keyid:d.keyid},type:"get",context:a,timeout:2500,statusCode:{404:function(){commFailure()}},beforeSend:function(){e.$container.addClass(d.loadingClass)}}).always(function(){e.$container.removeClass(d.loadingClass);b["private"].state(this,"loadingPhotos",!1)}).done(function(a){b["private"].state(this,"photoMetadataLoaded",!0);b["private"].state(this,"photoMetadata",a);c()})}},transitionPhotos:function(a,c,e,d){c.fadeOut("fast",function(){e.fadeIn("fast",function(){b["private"].state(a,
"index",d);b["private"].state(a,"transitioning",!1)})})},eventHandler:{controlClick:function(a,c){a.preventDefault();var e=f(this),d=b["private"].options(c);e.is("."+d.nextBtnClass)&&b["public"].next.call(c);e.is("."+d.prevBtnClass)&&b["public"].previous.call(c);return!1}}}};f.fn.wolfnetThumbnailScroller=function(a){if(b["public"][a])return b["public"][a].apply(this,Array.prototype.slice.call(arguments,1));if("object"===typeof a||!a)return b["public"].init.apply(this,arguments);f.error("Method "+
a+" does not exist on jQuery.wolfnetThumbnailScroller")}}(jQuery,document,window);
