(function(a){var h,d,i,c;function e(b){return a.data(b,"tooltip")}function r(b){e(this).delay?j=setTimeout(n,e(this).delay):n();o=!!e(this).track;a(document.body).bind("mousemove",l);l(b)}function s(){if(!a.tooltip.blocked&&!(this==f||!this.tooltipText&&!e(this).bodyHandler)){f=this;m=this.tooltipText;if(e(this).bodyHandler){h.hide();var b=e(this).bodyHandler.call(this);b.nodeType||b.jquery?d.empty().append(b):d.html(b);d.show()}else if(e(this).showBody){b=m.split(e(this).showBody);h.html(b.shift()).show();
d.empty();for(var g=0,p;p=b[g];g++)0<g&&d.append("<br/>"),d.append(p);d.hideWhenEmpty()}else h.html(m).show(),d.hide();e(this).showURL&&a(this).url()?i.html(a(this).url().replace("http://","")).show():i.hide();c.addClass(e(this).extraClass);r.apply(this,arguments)}}function n(){j=null;!a.fn.bgiframe&&e(f).fade?c.is(":animated")?c.stop().show().fadeTo(e(f).fade,f.tOpacity):c.is(":visible")?c.fadeTo(e(f).fade,f.tOpacity):c.fadeIn(e(f).fade):c.show();l()}function l(b){if(!a.tooltip.blocked&&!(b&&"OPTION"==
b.target.tagName))if(!o&&c.is(":visible")&&a(document.body).unbind("mousemove",l),null==f)a(document.body).unbind("mousemove",l);else{c.removeClass("viewport-right").removeClass("viewport-bottom");var g=c[0].offsetLeft,d=c[0].offsetTop;b&&(g=b.pageX+e(f).left,d=b.pageY+e(f).top,b="auto",e(f).positionLeft&&(b=a(window).width()-g,g="auto"),c.css({left:g,right:b,top:d}));var b=a(window).scrollLeft(),h=a(window).scrollTop(),i=a(window).width(),j=a(window).height(),k=c[0];b+i<k.offsetLeft+k.offsetWidth&&
(g-=k.offsetWidth+20+e(f).left,c.css({left:g+"px"}).addClass("viewport-right"));h+j<k.offsetTop+k.offsetHeight&&(d-=k.offsetHeight+20+e(f).top,c.css({top:d+"px"}).addClass("viewport-bottom"))}}function q(){function b(){c.removeClass(d.extraClass).hide().css("opacity","")}if(!a.tooltip.blocked){j&&clearTimeout(j);f=null;var d=e(this);!a.fn.bgiframe&&d.fade?c.is(":animated")?c.stop().fadeTo(d.fade,0,b):c.stop().fadeOut(d.fade,b):b()}}c=i=d=h=void 0;var f,m,j,o=!1;a.tooltip={blocked:!1,defaults:{delay:200,
fade:!1,showURL:!0,extraClass:"",top:15,left:15,id:"tooltip"},block:function(){a.tooltip.blocked=!a.tooltip.blocked}};a.fn.extend({tooltip:function(b){b=a.extend({},a.tooltip.defaults,b);c||(c=a('<div id="'+b.id+'"><h3></h3><div class="body"></div><div class="url"></div></div>').appendTo(document.body).hide(),a.fn.bgiframe&&c.bgiframe(),h=a("h3",c),d=a("div.body",c),i=a("div.url",c));return this.each(function(){a.data(this,"tooltip",b);this.tOpacity=c.css("opacity");this.tooltipText=this.title;a(this).removeAttr("title");
this.alt=""}).mouseover(s).mouseout(q).click(q)},hideWhenEmpty:function(){return this.each(function(){a(this)[a(this).html()?"show":"hide"]()})},url:function(){return this.attr("href")||this.attr("src")}})})(jQuery);
