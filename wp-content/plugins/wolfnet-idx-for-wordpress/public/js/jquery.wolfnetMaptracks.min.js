!function($){var pluginName="wolfnetMapTracks",MapTracks=function(){};MapTracks.prototype.createMap=function(a){var b={mapName:$(a).attr("data-wnt-map-name"),centerLat:$(a).attr("data-wnt-map-centerlat"),centerLng:$(a).attr("data-wnt-map-centerlng"),mapZoomLevel:$(a).attr("data-wnt-map-mapzoomlevel"),hasHouseView:"true"===$(a).attr("data-wnt-map-hasHouseView"),hasStreetView:"true"===$(a).attr("data-wnt-map-hasStreetView"),hasMiniMap:"true"===$(a).attr("data-wnt-map-hasMiniMap"),showScales:"true"===$(a).attr("data-wnt-map-showScales"),showZoom:"false"!==$(a).attr("data-wnt-map-showZoom"),showView:"false"!==$(a).attr("data-wnt-map-showView"),provider:$(a).attr("data-wnt-map-provider"),mapViewType:$(a).attr("data-wnt-map-mapViewType"),mapDragType:$(a).attr("data-wnt-map-mapDragType"),allowMouseWheel:$(a).attr("data-wnt-map-allowMouseWheel"),hasStartingRect:$(a).is("[data-wnt-map-brLat]"),startingRectangle:{tlLat:$(a).attr("data-wnt-map-tlLat"),tlLng:$(a).attr("data-wnt-map-tlLng"),brLat:$(a).attr("data-wnt-map-brLat"),brLng:$(a).attr("data-wnt-map-brLng")},persistedMapScale:$("#h_map_scale").val(),hasPOIIcon:$(a).is("[data-wnt-map-poi-icon]"),poiIcon:{icon:$(a).attr("data-wnt-map-poi-icon"),lat:$(a).attr("data-wnt-map-poi-lat"),lng:$(a).attr("data-wnt-map-poi-lng")}};b.isMovable="true"===$(a).attr("data-wnt-map-isMoveable"),this.map=new MapTracksMap(a,b)};var MapTracksMap=function(baseNode,params){mapTracksGlobals.MAP_ID++;var map=this,mapNode=baseNode,mapID=mapTracksGlobals.MAP_ID,mapName=getParam(params.mapName,"map"),width=$(mapNode).width(),height=$(mapNode).height(),mapZoomLevel=getParam(params.mapZoomLevel,6),houseViewZoomLevel=getParam(params.houseViewZoomLevel,1),centerLat=getParam(params.centerLat,44.970104),centerLng=getParam(params.centerLng,-93.256915),isMovable=getParam(params.isMovable,!0),hasMiniMap=getParam(params.hasMiniMap,!1),showScales=getParam(params.showScales,!0),showZoom=getParam(params.showZoom,!0),showView=getParam(params.showView,!0),provider=getParam(params.provider,"bing"),mapViewType=getParam(params.mapViewType,"map"),dragType="move",hasStreetView=getParam(params.hasStreetView,!1),hasHouseView=getParam(params.hasHouseView,!1),allowMouseWheel=getParam(params.allowMouseWheel,!1),mouseWheelEnabled=!1,mouseOverMap=!1,mouseWheelRolloverEnabled=!0,mapquestPan=getParam(params.mapquestPan,25),mapquestMaxZoom=getParam(params.mapquestMaxZoom,15),mapquestMinZoom=getParam(params.mapquestMinZoom,3),mapquestZoomAdjust=3,bingVerticalPan=getParam(params.bingVerticalPan,75),bingHorizontalPan=getParam(params.bingHorizontalPan,100),hasStartingRect=getParam(params.hasStartingRect,!1),startingRect=getParam(params.startingRectangle,{}),persistedMapScale=getParam(params.persistedMapScale,""),hasPOIIcon=getParam(params.hasPOIIcon,!1),poiIcon=getParam(params.poiIcon,{}),startMapZoomLevel=mapZoomLevel,startCenterLat=centerLat,startCenterLng=centerLng,startDragType=dragType,currentView="",mapIsLoading="",lastRolloverContent="",map_office_ID="",mapOrientation="",isHouseViewAvailable=!1,isStreetViewAvailable=!1;this.getBingMapNode=function(){return bingMapNode},this.getMapQuestNode=function(){return mapquestNode},this.getCurrentView=function(){return currentView},this.getDragType=function(){return dragType},this.getAllowMouseWheel=function(){return allowMouseWheel},this.getMapOrientation=function(){return mapOrientation},this.isHouseViewAvailable=function(){return isHouseViewAvailable},this.isStreetViewAvailable=function(){return isStreetViewAvailable},this.hasStreetView=function(){return hasStreetView},this.hasHouseView=function(){return hasHouseView},this.pauseDrag=function(){startDragType=dragType,dragType="","move"==map.getDragType()?map.setDragMove(!1):map.setDragZoom(!1)},this.resumeDrag=function(){dragType=startDragType,"move"==map.getDragType()?map.setDragMove(!0):map.setDragZoom(!0)},this.setMapBindings=function(){$bindingFields.centerLat.val(mapquestMap.getCenter().lat),$bindingFields.centerLng.val(mapquestMap.getCenter().lng),$bindingFields.lrLat.val(mapquestMap.getBounds().lr.lat),$bindingFields.lrLng.val(mapquestMap.getBounds().lr.lng),$bindingFields.ulLat.val(mapquestMap.getBounds().ul.lat),$bindingFields.ulLng.val(mapquestMap.getBounds().ul.lng),$bindingFields.centerLat.change(),$bindingFields.centerLng.change(),$bindingFields.lrLat.change(),$bindingFields.lrLng.change(),$bindingFields.ulLat.change(),$bindingFields.ulLng.change()},this.setupMouseControls=function(){var a=!1,b=this;a&&($("[data-wnt-mouseControlContainer=][data-wnt-map-name="+mapName+"]").each(function(){$(this).data("mouseControlContainer",b.mouseControlContainer(this,{}))}),$("[data-wnt-mouseControl=][data-wnt-map-name="+mapName+"]").each(function(){$(this).data("mouseControl",b.mouseControl(this,{}))})),$("[data-wnt-poi][data-wnt-map-name="+mapName+"]").each(function(){var a=this;if("mapquest"===$(this).attr("data-wnt-poi"))var c=b.mapquestFind("jsreqhandler.cfm?sname=spatial.access.mapquest.com&spath=mq&sport=80");else var c=b.bingFind();$(a).data("poi",c),$("[data-wnt-poi-checkbox=]",a).each(function(){var a=this,b=$(this).attr("data-wnt-poi-icon"),d=$(this).val();$(a).click(function(){$(a).is(":checked")?c.add(d,b):c.remove(d)})}),$("[data-wnt-poi-textbox=]",a).each(function(){var a=this,b=$(this).attr("data-wnt-poi-icon"),d=$(this).val();$(a).change(function(){c.remove(d),d=$(a).val(),c.add(d,b)})}),$("[data-wnt-poi-select=]",a).each(function(){var a=this,b=$(this).attr("data-wnt-poi-icon"),d=$(this).val();$(a).change(function(){c.remove(d),d=$(a).val(),c.add(d,b)})});var d=b.getSize().height,e=b.getSize().width;$("[data-wnt-poi-expand=]",a).click(function(){b.setSize(e,2*d)}),$("[data-wnt-poi-collapse=]",a).click(function(){b.setSize(e,d)}),$("#modernPOIExpand").click(function(){b.setSize(e,2*d)}),$("#modernPOIContract").click(function(){b.setSize(e,d)}),$("#modernPOIMapView").click(function(){b.setMapView()}),$("#modernPOIHybridView").click(function(){b.setHybridView()}),$("#modernPOIAerialView").click(function(){b.setSatView()}),$("#modernPOIStreetView").click(function(){b.setStreetView()})})},this.loadPOILibraries=function(){null!=googleStreetView&&google.maps.event.trigger(googleStreetView,"resize"),"undefined"==eval("typeof VEMap")&&void 0==$(bingMapNode).attachEvent&&this.loadBingLibrary()},this.loadBingLibrary=function(){var a=document.getElementsByTagName("head")[0],b=document.createElement("script");b.type="text/javascript",b.src="http://ecn.dev.virtualearth.net/mapcontrol/mapcontrol.ashx?v=6.2",a.appendChild(b),this.isBingLibraryLoaded()},this.isBingLibraryLoaded=function(){var interval=setInterval(function(){"undefined"!=eval("typeof VEMap")&&void 0!=document.getElementById(bingMapNode.id).attachEvent&&(clearInterval(interval),map.configureBingMap())},10)},this.configureBingMap=function(){hasHouseView&&($(bingMapNode).show(),bingHouseView=new VEMap(bingMapNode.id),bingHouseView.LoadMap(new VELatLong(centerLat,centerLng),houseViewZoomLevel,VEMapStyle.Birdseye),bingHouseView.HideDashboard(),bingHouseView.SetCenter(new VELatLong(centerLat,centerLng)),bingHouseView.AttachEvent("onkeydown",function(a){return a.keyCode>40||a.keyCode<37}),bingHouseView.AttachEvent("onkeyup",function(a){return a.keyCode>40||a.keyCode<37}),bingHouseView.AttachEvent("onkeypress",function(a){return a.keyCode>40||a.keyCode<37}),bingHouseView.AttachEvent("onendzoom",function(a){map.onZoomEnd()}),bingHouseView.AttachEvent("onobliquechange",function(a){map._orientationChanged()}),window.setInterval(function(){map._houseViewClientHandler()},500),navigator.userAgent.indexOf("Firefox/3.5")!=-1&&bingMapNode.addEventListener("DOMMouseScroll",function(a){return a.stopPropagation(),a.preventDefault(),a.cancelBubble=!1,!1},!1),$(bingMapNode).hide())},this.reset=function(){this.setCenter(startCenterLat,startCenterLng,startMapZoomLevel)},this.getMapName=function(){return mapName},this.setMapIsLoading=function(a){mapIsLoading=a,a?("zoom"==dragType&&$(tmpCursorCoverDiv).css({display:"block",cursor:"progress"}),$("img").bind("mousedown",function(a){a.preventDefault()})):($(tmpCursorCoverDiv).css({display:"none"}),"zoom"!=dragType&&$("img").bind("mousedown",function(a){}),$("img").bind("mousedown",function(a){}))},this.setMapView=function(){switch(null!=googleStreetView&&(googleStreetView.setVisible(!1),googleStreetView=null),provider){case"mapquest":$(bingMapNode).hide(),$(mapquestNode).show(),mapquestMap.setMapType("map");break;case"bing":$(bingMapNode).show(),bingHouseView.SetMapStyle(VEMapStyle.Road)}$(mapNode).trigger("enableMouseControls",[]),this._doMapSync("map")},this.setOfficeID=function(a){map_office_ID=a},this.toggleMouseWheelZoom=function(){"move"==dragType&&(mouseWheelEnabled?(MQA.withModule("mousewheel",function(){mapquestMap.enableMouseWheelZoom(),mapquestMap._mouseZooming=!0}),mouseWheelEnabled=!1,allowMouseWheel=!1,this._toggleMouseControl("mouseWheelZoom",!1,!1)):(MQA.withModule("mousewheel",function(){mapquestMap.enableMouseWheelZoom(),mapquestMap._mouseZooming=!1}),mouseWheelEnabled=!0,allowMouseWheel=!0,mouseWheelRolloverEnabled=!1,this._toggleMouseControl("mouseWheelZoom",!0,!1)),$(mapNode).trigger("mapControlChanged"))},this.setSatView=function(){switch(null!=googleStreetView&&(googleStreetView.setVisible(!1),googleStreetView=null),provider){case"mapquest":$(bingMapNode).hide(),$(mapquestNode).show(),mapquestMap.setMapType("sat");break;case"bing":$(bingMapNode).show(),bingHouseView.SetMapStyle(VEMapStyle.Aerial)}$(mapNode).trigger("enableMouseControls",[]),this._doMapSync("sat")},this.setHybridView=function(){switch(null!=googleStreetView&&(googleStreetView.setVisible(!1),googleStreetView=null),provider){case"mapquest":$(bingMapNode).hide(),$(mapquestNode).show(),mapquestMap.setMapType("hyb");break;case"bing":$(bingMapNode).show(),bingHouseView.SetMapStyle(VEMapStyle.Hybrid)}$(mapNode).trigger("enableMouseControls",[]),this._doMapSync("hyb")},this.setStreetView=function(){if(hasStreetView&&isStreetViewAvailable){$(bingMapNode).hide(),$(mapquestNode).hide();var a={position:new google.maps.LatLng(centerLat,centerLng),pitch:10,zoom:1};null==googleStreetView&&(googleStreetView=new google.maps.StreetViewPanorama(document.getElementById("poiMap_map"),a)),$(mapNode).trigger("disableMouseControls",[]),this._doMapSync("street")}},this.setHouseView=function(){this.hasHouseView()&&isHouseViewAvailable&&($(mapquestNode).hide(),null!=googleStreetView&&(googleStreetView.setVisible(!1),googleStreetView=null),$(bingMapNode).show(),"bing"===provider&&bingHouseView.SetMapStyle(VEMapStyle.Birdseye),$(mapNode).trigger("disableMouseControls",[]),this._doMapSync("house"))},this.setDragMove=function(a){if(null==a)var a=!0;$("img").bind("mousedown",function(a){a.preventDefault()}),dragType="move",mapquestMap._wireDOMEvents(mapquestNode),this._toggleMouseControl("dragMove",!1,a),$(tmpCursorCoverDiv).css({display:"none"})},this.setDragZoom=function(a){if(void 0==a)var a=!0;$("img").bind("mousedown",function(a){}),dragType="zoom",mapquestMap._unwireDOMEvents(),this._toggleMouseControl("dragZoom",!1,a)},this.setCenter=function(a,b,c){switch(provider){case"mapquest":switch(currentView){case"house":break;case"street":break;default:mapquestMap.setCenter({lat:a,lng:b}),mapquestMap.setZoomLevel(Number(c)+mapquestZoomAdjust)}break;case"bing":bingHouseView.SetCenterAndZoom(new VELatLong(a,b),c)}},this.getCenter=function(){switch(provider){case"mapquest":switch(currentView){case"house":var a=bingHouseView.GetCenter();return{lat:a.Latitude,lng:a.Longitude};case"street":break;default:return mapquestMap.getCenter()}break;case"bing":var a=bingHouseView.GetCenter();return{lat:a.Latitude,lng:a.Longitude}}},this.getBounds=function(){switch(provider){case"mapquest":switch(currentView){case"house":var a=bingHouseView.GetMapView();return{ul:{lat:a.TopLeftLatLong.Latitude,lng:a.TopLeftLatLong.Longitude},lr:{lat:a.BottomRightLatLong.Latitude,lng:a.BottomRightLatLong.Longitude}};case"street":break;default:return mapquestMap.getBounds()}break;case"bing":var a=bingHouseView.GetMapView();return{ul:{lat:a.TopLeftLatLong.Latitude,lng:a.TopLeftLatLong.Longitude},lr:{lat:a.BottomRightLatLong.Latitude,lng:a.BottomRightLatLong.Longitude}}}},this.getMapquestMaxZoom=function(){return mapquestMaxZoom},this.getMapquestMinZoom=function(){return mapquestMinZoom},this.panUp=function(){switch(currentView){case"house":bingHouseView.Pan(0,-bingVerticalPan);break;case"street":break;default:mapquestMap.panNorth(mapquestPan)}},this.panDown=function(){switch(currentView){case"house":bingHouseView.Pan(0,bingVerticalPan);break;case"street":break;default:mapquestMap.panSouth(mapquestPan)}},this.panRight=function(){switch(currentView){case"house":bingHouseView.Pan(bingHorizontalPan,0);break;case"street":break;default:mapquestMap.panEast(mapquestPan)}},this.panLeft=function(){switch(currentView){case"house":bingHouseView.Pan(-bingHorizontalPan,0);break;case"street":break;default:mapquestMap.panWest(mapquestPan)}},this.zoomIn=function(){switch(currentView){case"house":bingHouseView.ZoomIn();break;case"street":break;default:switch(provider){case"mapquest":mapquestMap.setZoomLevel(mapquestMap.getZoomLevel()+1);break;case"bing":bingHouseView.ZoomIn()}}},this.zoomOut=function(){switch(currentView){case"house":bingHouseView.ZoomOut();break;case"street":break;default:switch(provider){case"mapquest":mapquestMap.setZoomLevel(mapquestMap.getZoomLevel()-1);break;case"bing":bingHouseView.ZoomOut()}}},this.zoomTo=function(a){switch(currentView){case"house":case"street":break;default:switch(provider){case"mapquest":mapquestMap.setZoomLevel(Number(a)+mapquestZoomAdjust);break;case"bing":bingHouseView.SetZoomLevel(a)}}},this.getZoomLevel=function(){switch(currentView){case"house":case"street":return 1;default:switch(provider){case"mapquest":return Number(mapquestMap.getZoomLevel())-mapquestZoomAdjust;case"bing":return bingHouseView.GetZoomLevel()}}},this.rotateCW=function(){if("house"==currentView)switch(bingHouseView.GetBirdseyeScene().GetOrientation()){case"North":bingHouseView.SetBirdseyeOrientation(VEOrientation.East);break;case"South":bingHouseView.SetBirdseyeOrientation(VEOrientation.West);break;case"West":bingHouseView.SetBirdseyeOrientation(VEOrientation.North);break;case"East":bingHouseView.SetBirdseyeOrientation(VEOrientation.South)}},this.rotateCCW=function(){if("house"==currentView)switch(bingHouseView.GetBirdseyeScene().GetOrientation()){case"North":bingHouseView.SetBirdseyeOrientation(VEOrientation.West);break;case"South":bingHouseView.SetBirdseyeOrientation(VEOrientation.East);break;case"West":bingHouseView.SetBirdseyeOrientation(VEOrientation.South);break;case"East":bingHouseView.SetBirdseyeOrientation(VEOrientation.North)}},this.addPoi=function(a){this.addMapPoi(a),this.addHouseViewPoi(a)},this.removePoi=function(a){this.removeMapPoi(a),this.removeHouseViewPoi(a)},this.addMapPoi=function(a){switch(provider){case"mapquest":mapquestMap.addShape(a.getMapquestPoi());break;case"bing":this.addHouseViewPoi(a)}},this.removeMapPoi=function(a){switch(provider){case"mapquest":mapquestMap.removeShape(a.getMapquestPoi()),a.mapquestPoi=null;break;case"bing":this.removeHouseViewPoi(a)}},this.addHouseViewPoi=function(a){if("house"==currentView||"bing"===provider){try{bingHouseView.AddShape(a.getBingPoi())}catch(b){}a.getBingPoi().Show()}},this.removeHouseViewPoi=function(a){"house"!=currentView&&"bing"!==provider||a.getBingPoi().Hide()},this.setSize=function(a,b){width=a,height=b,$(mapNode).css({width:width,height:height}),$(bingMapNode).css({width:width,height:height}),$(mapquestNode).css({width:width,height:height}),hasStreetView&&null!=googleStreetView&&google.maps.event.trigger(googleStreetView,"resize"),(hasHouseView||"bing"==provider)&&bingHouseView.Resize(width,height),"mapquest"==provider&&mapquestMap.setSize(new MQA.Size(width,height)),$(mapNode).trigger("shiftMouseControlContainer",[b])},this.getSize=function(){return{width:width,height:height}},this.show=function(){$(mapNode).show()},this.hide=function(){$(mapNode).hide()},this.doBingFind=function(a,b){"bing"===provider&&bingHouseView.Find(a,null,VEFindType.Businesses,null,0,10,!1,!1,!1,!1,b)},this.canZoomIn=function(){switch(currentView){case"house":return!(bingHouseView.GetZoomLevel()>=2);case"street":break;default:switch(provider){case"mapquest":return!(map.getZoomLevel()>=mapquestMaxZoom);case"bing":return!(bingHouseView.GetZoomLevel()>=mapquestMaxZoom)}}},this.canZoomOut=function(){switch(currentView){case"house":return!(bingHouseView.GetZoomLevel()<=1);case"street":break;default:switch(provider){case"mapquest":return!(map.getZoomLevel()<=mapquestMinZoom);case"bing":return!(bingHouseView.GetZoomLevel()<=mapquestMinZoom)}}},this.zoomToRect=function(a,b,c,d){switch(provider){case"mapquest":var e=new MQA.LatLng(a,b),f=new MQA.LatLng(c,d),g=new MQA.RectLL;g.ul=e,g.lr=f,mapquestMap.zoomToRect(g);break;case"bing":bingHouseView.SetMapView([new VELatLong(a,b),new VELatLong(c,d)])}},this._doMapSync=function(a){currentView=a,$(mapNode).trigger("currentView",[a]),this._orientationChanged()},this._toggleMouseControl=function(a,b,c){$(mapNode).trigger("toggleMouseControl",[a,b,c])},this._houseViewClientHandler=function(){bingHouseView.IsBirdseyeAvailable()!=isHouseViewAvailable&&(isHouseViewAvailable=bingHouseView.IsBirdseyeAvailable(),$(mapNode).trigger("isHouseViewAvailable",[bingHouseView.IsBirdseyeAvailable()]))},this._streetViewClientHandler=function(a){null==a?(isStreetViewAvailable=!1,$(mapNode).trigger("isStreetViewAvailable",[!1]),"undefined"!=typeof $("#modernPOIStreetView")&&$("#modernPOIStreetView").hide()):(isStreetViewAvailable=!0,$(mapNode).trigger("isStreetViewAvailable",[!0]))},this._dragZoomMouseDown=function(a){this.mouseIsDown=!0,width=$(mapNode).width(),height=$(mapNode).height(),this.aspectRatio=height/width,$(tmpCursorCoverDiv).css({top:"0px",left:"0px",height:height+"px",width:width+"px"}),"search"==mapName?(this.coverOffX=parseInt($(mapNode).position().left),this.coverOffY=parseInt($(mapNode).position().top)):(this.coverOffX=parseInt($(mapNode).offset().left),this.coverOffY=parseInt($(mapNode).offset().top)),$("blockDiv").innerHTML="",this.startY=a.pageY,this.startX=a.pageX,this.startX-=this.coverOffX,this.startY-=this.coverOffY,$(tmpCursorCoverDiv).css({display:"block",cursor:"se-resize"}),$(tmpBlockDiv).css({display:"block",left:this.startX+"px",top:this.startY+"px",height:"1px",width:"1px"})},this._dragZoomMouseMove=function(a){if(this.mouseIsDown){var b=a.pageY,c=a.pageX;if(c-=this.coverOffX,b-=this.coverOffY,this.startX>c){c<1?(this.drawLeft=1,this.drawWidth=this.startX-1):(this.drawLeft=c,this.drawWidth=this.startX-c)}else{this.drawLeft=this.startX,this.drawWidth=c-this.startX;c-this.startX}var d=this.drawWidth*this.aspectRatio;if(this.startY>b){b<0?(this.drawTop=1,this.drawHeight=d):(this.drawTop=this.startY-d,this.drawHeight=d);this.startY-b}else{this.drawTop=this.startY,this.drawHeight=d;b-this.startY}$(tmpBlockDiv).css({left:this.drawLeft+"px",top:this.drawTop+"px",width:this.drawWidth+"px",height:this.drawHeight+"px"})}},this._dragZoomMouseUp=function(a){this.mouseIsDown=!1;var b=a.pageY,c=a.pageX;this.startX+=this.coverOffX,this.startY+=this.coverOffY,c>this.startX?this.endX=this.startX+this.drawWidth:this.endX=this.startX-this.drawWidth,b>this.startY?this.endY=this.startY+this.drawHeight:this.endY=this.startY-this.drawHeight;var d=Math.abs(this.endX-this.startX),e=!1,f=!0;if(d>35){if(Math.abs(this.startX-this.endX)<8&&Math.abs(this.startY-this.endY)<8)var g=mapquestMap.pixToLL(new MQA.Point(this.startX,this.startY)),h=mapquestMap.pixToLL(new MQA.Point(this.endX,this.endY));else var g=mapquestMap.pixToLL(new MQA.Point(startX-coverOffX,startY-coverOffY)),h=mapquestMap.pixToLL(new MQA.Point(endX-coverOffX,endY-coverOffY));this.zoomToRect(g.getLatitude(),g.getLongitude(),h.getLatitude(),h.getLongitude()),f=!1,e=!0}this._dragZoomReset(e,f)},this._dragZoomReset=function(a,b){if("zoom"==dragType){if(startX=0,startY=0,endX=0,endY=0,drawLeft=0,drawWidth=0,drawTop=0,drawHeight=0,mouseIsDown=!1,a&&!mapIsLoading){var c=mapquestMap.getSize().width+1,d=mapquestMap.getSize().height+1,e=!0;this.setMapIsLoading(!0),e?$(tmpBlockDiv).animate({top:"0px",left:"0px",width:c+"px",height:d+"px",opacity:.2,filter:"alpha(opacity=20)"},200,function(){$(tmpBlockDiv).css({display:"none",top:"0px",left:"0px",width:"0px",height:"0px",opacity:.6,filter:"alpha(opacity=60)"}),$(tmpCursorCoverDiv).css({display:"none"})}):($(tmpBlockDiv).css({display:"none"}),$(tmpCursorCoverDiv).css({display:"none"}))}else{var f=700;void 0!=b&&b&&(f=0),$(tmpBlockDiv).fadeOut(f,function(){$(tmpBlockDiv).css({display:"none",top:"0px",left:"0px",width:"0px",height:"0px",opacity:.6,filter:"alpha(opacity=60)"}),$(tmpCursorCoverDiv).css({display:"none"})})}this.setMapIsLoading(!1),$("img").bind("mousedown",function(a){a.preventDefault()})}},this._orientationChanged=function(a){if("house"==currentView)switch(bingHouseView.GetBirdseyeScene().GetOrientation()){case VEOrientation.North:mapOrientation="n";break;case VEOrientation.South:mapOrientation="s";break;case VEOrientation.West:mapOrientation="w";break;case VEOrientation.East:mapOrientation="e"}else mapOrientation="n";$(mapNode).trigger("mapOrientation",[mapOrientation])},this.controlContainer=function(a){var b=(mapTracksGlobals.CONTROL_ID++,800),c=400,d=document.createElement("div");$(d).addClass("wntControlExpand").click(function(){$(mapNode).trigger("showControls")}),$(a).parent().append(d),$(mapNode).bind("hideControls",function(){$(a).animate({left:-400},b,function(){$(d).animate({left:0},c)})}),$(mapNode).bind("showControls",function(){$(d).animate({left:-71},c,function(){$(a).animate({left:0},b)})})},this.navMapControl=function(a){var b=this,c=mapTracksGlobals.CONTROL_ID++,d=document.createElement("div");$(d).addClass("wntStreetCloseButton").click(function(){b.setMapView()}).hide(),$(a.parentNode).append(d);var e=document.createElement("span");$(e).attr("id","wntNavBackground"+c).addClass("wntNavBackground"),$(a).append(e);var f=document.createElement("span");$(f).attr("id","wntNavStart"+c).addClass("wntNavStart"),$(a).append(f);var g=document.createElement("span");$(g).attr("id","wntNavMapView"+c).addClass("wntNavMenuItem").html("Map").click(function(){b.setMapView()}),$(a).append(g);var h=document.createElement("span");$(h).attr("id","wntNavHybridView"+c).addClass("wntNavMenuItem").html("Hybrid").click(function(){b.setHybridView()}),$(a).append(h);var i=document.createElement("span");if($(i).attr("id","wntNavSatView"+c).addClass("wntNavMenuItem").html("Aerial").click(function(){b.setSatView()}),$(a).append(i),this.hasHouseView()){var j=document.createElement("span");$(j).attr("id","wntNavHouseView"+c).addClass("wntNavMenuItem").html("House View").click(function(){b.setHouseView()}),$(a).append(j)}if(this.hasStreetView()){var k=document.createElement("span");$(k).attr("id","wntNavStreetView"+c).addClass("wntNavMenuItem").html("Street View").click(function(){b.setStreetView()}),$(a).append(k)}var l=document.createElement("span");$(l).attr("id","wntNavEnd"+c).addClass("wntNavEnd").click(function(){$(mapNode).trigger("hideControls")}),$(a).append(l),$(mapNode).bind("isStreetViewAvailable",function(a,b){m(b)}),$(mapNode).bind("isHouseViewAvailable",function(a,b){n(b)}),$(mapNode).bind("currentView",function(a,b){p(b)}),$(mapNode).bind("mapControlChanged",function(){o()});var m=function(a){a?$(k).removeClass("notAvailable"):$(k).addClass("notAvailable")},n=function(a){a?$(j).removeClass("notAvailable"):$(j).addClass("notAvailable")},o=function(){},p=function(b){"house"==b?$(j).addClass("selected"):$(j).removeClass("selected"),"street"==b?($(d).show(),$(a).hide()):($(d).hide(),$(a).show()),"map"==b?$(g).addClass("selected"):$(g).removeClass("selected"),"sat"==b?$(i).addClass("selected"):$(i).removeClass("selected"),"hyb"==b?$(h).addClass("selected"):$(h).removeClass("selected")};return p(this.getCurrentView()),m(this.isStreetViewAvailable()),n(this.isHouseViewAvailable()),this},this.mouseControlContainer=function(a){var b=(mapTracksGlobals.CONTROL_ID++,800),c=400,d=235;f(d),$(mapNode).bind("shiftMouseControlContainer",function(a,b){f(b)}),$(mapNode).bind("disableMouseControls",function(a){g()}),$(mapNode).bind("enableMouseControls",function(a){h()});var e=document.createElement("div");$(e).addClass("wntMouseControlExpand").click(function(){$(mapNode).trigger("showControls")}),$(a).parent().append(e),$(mapNode).bind("hideControls",function(){$(a).animate({left:-400},b,function(){$(e).animate({left:0},c)})}),$(mapNode).bind("showControls",function(){$(e).animate({left:-71},c,function(){$(a).animate({left:0},b)})});var f=function(b){var c=b-25;"poi"==mapNode.getMapName()&&$(a).css({top:c+"px"})},g=function(){$(a).hide()},h=function(){$(a).show()}},this.mouseControl=function(a){var b=this,c=mapTracksGlobals.CONTROL_ID++,d=document.createElement("div");$(d).attr("id","wntMouseControlBackground"+c).addClass("wntMouseControlBackground"),$(a).append(d);var e=document.createElement("div");$(e).attr("id","wntMouseControlStart"+c).addClass("wntMouseControlStart"),$(a).append(e);var f=document.createElement("div");$(f).attr("id","wntClickDragLabel"+c).addClass("wntMouseMenuItem").css({cursor:"default",borderLeft:"0px"}),$(a).append(f);var g=document.createElement("div");$(g).attr("id","wntClickDragLabelText"+c).addClass("wntMouseControlContent").html("Click & Drag to: "),$(f).append(g);var h=document.createElement("div");$(h).attr("id","wntMouseZoomControl"+c).addClass("wntMouseMenuItem").click(function(){b.setDragZoom()}),$(a).append(h);var i=document.createElement("div");$(i).attr("id","wntMouseZoomText"+c).addClass("wntMouseControlContent").html("Zoom"),$(h).append(i);var j=document.createElement("div");$(j).attr("id","wntmouseMoveControl"+c).addClass("wntMouseMenuItem").click(function(){b.setDragMove()}),$(a).append(j);var k=document.createElement("div");$(k).attr("id","wntMouseMoveText"+c).addClass("wntMouseControlContent").html("Move"),$(j).append(k).addClass("selected");var l=document.createElement("span");$(l).attr("id","spacerNode"+c).addClass("wntMouseMenuSpacer").html(" "),$(a).append(l);var m=document.createElement("div");$(m).attr("id","wntMouseWheelZoom"+c).addClass("wntMouseMenuItem").click(function(){b.toggleMouseWheelZoom()}),$(a).append(m);var n=document.createElement("div");$(n).attr("id","wntMouseWheelZoomText"+c).addClass("wntMouseControlContent").html(" Mouse Wheel Zoom"),$(n).css({paddingTop:"0px"}),$(m).append(n);var o=document.createElement("span");$(o).attr("id","wntMouseControlEnd"+c).addClass("wntNavEnd").click(function(){$(mapNode).trigger("hideControls")}),$(a).append(o),$(mapNode).bind("toggleMouseControl",function(a,b,c,d){p(b,c,d)});var p=function(a,b,c){switch(a){case"dragMove":$(j).addClass("selected"),$(h).removeClass("selected"),$(m).css({opacity:1,filter:"alpha(opacity=100)"}),c&&$(mapNode).trigger("mapControlChanged");break;case"dragZoom":$(h).addClass("selected"),$(j).removeClass("selected"),$(m).css({opacity:.4,filter:"alpha(opacity=40)"}),c&&$(mapNode).trigger("mapControlChanged")}};return this},this.panZoomMapControl=function(a,b){var c=this,d=getParam(b.expandedZoom,!1),e=mapTracksGlobals.CONTROL_ID++,f=function(a){return function(){c.zoomTo(a)}},g=function(b){switch(b){case"street":$(a).hide();break;case"house":$(a).show(),$(r).show(),$(v).hide(),$(s).show();break;default:$(r).show(),d?$(v).show():$(v).hide(),$(a).show(),$(s).hide()}i()},h=function(a){switch($(j).removeClass("wntNorth").removeClass("wntSouth").removeClass("wntWest").removeClass("wntEast"),a){case"n":$(j).addClass("wntNorth");break;case"s":$(j).addClass("wntSouth");break;case"w":$(j).addClass("wntWest");break;case"e":$(j).addClass("wntEast")}},i=function(){c.canZoomIn()?$(u).removeClass("disabled"):$(u).addClass("disabled"),c.canZoomOut()?$(y).removeClass("disabled"):$(y).addClass("disabled");for(var a=c.getMapquestMaxZoom();a>=c.getMapquestMinZoom();a--)$(v).removeClass("wntZoomLevel_"+a);$(v).addClass("wntZoomLevel_"+c.getZoomLevel())},j=document.createElement("div");$(j).attr("id","wntPanBackground"+e).addClass("wntPanBackground").addClass("wntNorth"),$(a).append(j);var k=document.createElement("div");$(k).attr("id","wntPanUp"+e).addClass("wntPanUp").click(function(){c.panUp()}),$(j).append(k);var l=document.createElement("div");$(l).attr("id","wntPanDown"+e).addClass("wntPanDown").click(function(){c.panDown()}),$(j).append(l);var m=document.createElement("div");$(m).attr("id","wntPanLeft"+e).addClass("wntPanLeft").click(function(){c.panLeft()}),$(j).append(m);var n=document.createElement("div");$(n).attr("id","wntPanRight"+e).addClass("wntPanRight").click(function(){c.panRight()}),$(j).append(n);var o=document.createElement("div");$(o).attr("id","wntZRContainer"+e).addClass("wntZRContainer"),$(a).append(o);var p=document.createElement("div");$(p).attr("id","wntZRBackground"+e).addClass("wntZRBackground"),$(o).append(p);var q=document.createElement("div");$(q).attr("id","wntZRTop"+e).addClass("wntZRTop"),$(o).append(q);var r=document.createElement("div");$(r).attr("id","wntZoomContainer"+e).addClass("wntZoomContainer"),$(o).append(r);var s=document.createElement("div");$(s).attr("id","wntRotateContainer"+e).addClass("wntRotateContainer"),$(o).append(s);var t=document.createElement("div");$(t).attr("id","wntZoomRotateBottom"+e).addClass("wntZoomRotateBottom"),$(o).append(t);var u=document.createElement("div");$(u).attr("id","wntZoomIn"+e).addClass("wntZoomIn").click(function(){c.zoomIn()}),$(r).append(u);var v=document.createElement("div");if($(v).attr("id","wntZoomBar"+e).addClass("wntZoomBar"),d){$(v).show();for(var w=c.getMapquestMaxZoom();w>=c.getMapquestMinZoom();w--){var x=document.createElement("div");$(x).addClass("wntZoomButton").addClass("wntZoomButton_"+w).click(f(w)),$(v).append(x)}}else $(v).hide();$(r).append(v);var y=document.createElement("div");$(y).attr("id","wntZoomOut"+e).addClass("wntZoomOut").click(function(){c.zoomOut()}),$(r).append(y);var z=document.createElement("div");$(z).attr("id","wntRotateCW"+e).addClass("wntRotateCW").click(function(){c.rotateCW()}),$(s).append(z);var A=document.createElement("div");return $(A).attr("id","wntRotateCCW"+e).addClass("wntRotateCCW").click(function(){c.rotateCCW()}),$(s).append(A),g(c.getCurrentView()),h(c.getMapOrientation()),$(mapNode).bind("currentView",function(a,b){g(b)}),$(mapNode).bind("mapOrientation",function(a,b){h(b)}),$(mapNode).bind("zoomEnd",function(a){i()}),this},this.bingFind=function(a){var b=this,c=function(a,c){b.doBingFind(a,d);var d=function(a,b){var d=[];$(b).each(function(){d.push({name:this.Name,lat:this.LatLong.Latitude,lng:this.LatLong.Longitude})}),c(d)}};return this.find(c)},this.mapquestFind=function(a,b){var c=this,d=function(b,d){if(""===b)this._mapquestResults("",d);else{var f=c.getZoomLevel(),g=Math.pow(.54,f-14)/3,h=parseInt(22*g);h<40&&(h=40),h>150&&(h=150);var i='<?xml version="1.0" encoding="ISO-8859-1"?><Search Version="0"><RadiusSearchCriteria><MaxMatches>'+h+"</MaxMatches><Radius>"+g+"</Radius><CenterLatLng><Lat>"+c.getCenter().lat+"</Lat><Lng>"+c.getCenter().lng+'</Lng></CenterLatLng></RadiusSearchCriteria>\n<CoverageName></CoverageName><DBLayerQueryCollection Count="1"><DBLayerQuery><LayerName>MQA.NTPois</LayerName><ExtraCriteria>facility = '+b+'</ExtraCriteria></DBLayerQuery></DBLayerQueryCollection><FeatureCollection Version="0" Count="0"></FeatureCollection><DTCollection Count="0"></DTCollection><Authentication Version="2"><TransactionInfo></TransactionInfo></Authentication></Search>';$.post(a,i,function(a){e(a,d)},"xml")}},e=function(a,b){var c=[];$(a).find("SearchResponse").find("FeatureCollection").find("PointFeature").each(function(){c.push({name:$(this).find("Name").text(),lat:$(this).find("CenterLatLng").find("Lat").text(),lng:$(this).find("CenterLatLng").find("Lng").text()})}),b(c)};return this.find(d)},this.find=function(a,b){var c={},d=[],e=!1,f={};c.add=function(a,b){e?d.push({action:"add",value:a,
icon:b}):g(a,b)},c.remove=function(a){e?d.push({action:"remove",value:a}):h(a)};var g=function(b,c){e=!0,a(b,function(a){var d=map.mapIcon(c,22,24);f[b]=[],$(a).each(function(){var a=map.poi(this.lat,this.lng,d,this.name);map.addPoi(a),f[b].push(a)}),i()})},h=function(a){$(f[a]).each(function(){map.removePoi(this)}),i()},i=function(){if(d.length>0){var a=d.shift();"add"===a.action?g(a.value,a.icon):h(a.value)}else e=!1};return c},this.mapIcon=function(a,b,c){var d={},e=null,f=null,g=function(){return e=new MQA.Icon(a,b,c)},h=function(){return f='<img src="'+a+'" />',getBingIcon=_getBingIcon,f};return d.getMapquestIcon=function(){return null==e&&(e=g()),e},d.getBingIcon=function(){return null==f&&(f=h()),f},d},this.poi=function(a,b,c,d,e,f){var g=null,h=null,i=!1,j={},k=function(){return g=new MQA.Poi({lat:a,lng:b}),void 0!==c&&null!=c&&g.setIcon(c.getMapquestIcon()),void 0!==d&&null!=d&&g.setRolloverContent(d),MQA.EventManager.addListener(g,"mouseover",function(a){var b=g.rolloverContent;lastRolloverContent=b,g.rolloverContent="",i=!0,window.setTimeout(function(){g.rolloverContent=b,i&&void 0==g.rolloverWindow&&g.toggleInfoWindowRollover()},500)}),MQA.EventManager.addListener(g,"mouseout",function(a){i=!1,void 0!=g.rolloverWindow&&g.toggleInfoWindowRollover(),""!=lastRolloverContent&&(g.rolloverContent=lastRolloverContent)}),MQA.EventManager.addListener(g,"touchstart",function(a){g.toggleInfoWindowRollover()}),g},l=function(){return h=new VEShape(VEShapeType.Pushpin,new VELatLong(a,b)),void 0!==c&&null!=c&&h.SetCustomIcon(c.getBingIcon()),void 0!==d&&null!=d&&h.SetDescription(d),h};return j.getMapquestPoi=function(){return null==g&&(g=k()),g},j.getBingPoi=function(){return null==h&&(h=l()),h},j};var _persistMapControl=function(){var a=$("#baseURL").val();if(void 0!=a?("https:"==document.location.protocol&&(a=a.replace("http:","https:")),a+="/"):a="","poiMiniMap"!=mapName){var b={mapViewType:map.getCurrentView(),mapDragType:map.getDragType(),allowMouseWheel:map.getAllowMouseWheel()};$bindingFields.mapViewType.val(b.mapViewType),$bindingFields.mapDragType.val(b.mapDragType),$bindingFields.allowMouseWheel.val(b.allowMouseWheel),mapTrack()}},mapTrigger=0,mapTrack=function(){var a=(++mapTrigger,$("#baseURL").val());void 0!=a?("https:"==document.location.protocol&&(a=a.replace("http:","https:")),a+="/"):a=""};this.onZoomEnd=function(a){map.setMapBindings(),$(mapNode).trigger("zoomEnd")},this.onMoveEnd=function(a){map.setMapBindings(),$(mapNode).trigger("moveEnd")},this.onMoveStart=function(a){$(mapNode).trigger("moveStart")},this.onDragEnd=function(a){map.setMapBindings(),$(mapNode).trigger("dragEnd")},this.houseOverClick=function(a,b){window.location.href=b},this.bestFit=function(){return mapquestMap.bestFit()},this.addShape=function(a){return mapquestMap.addShape(a)},this.removeAllShapes=function(){return mapquestMap.removeAllShapes()},this.getZoomLevel=function(){return Number(mapquestMap.getZoomLevel())-mapquestZoomAdjust},this.setZoomLevel=function(a){return mapquestMap.setZoomLevel(Number(a)+mapquestZoomAdjust)},this.getBounds=function(){return mapquestMap.getBounds()},this.pixToLL=function(a){return mapquestMap.pixToLL(a)};var bingMapNode=document.createElement("div");$(bingMapNode).attr("id","wntMtBing"+mapID).css("width",width).css("height",height).css("position","relative").hide(),$(mapNode).append(bingMapNode);var mapquestNode=document.createElement("div");$(mapquestNode).attr("id","wntMtMapquest"+mapID).css("width",width).css("height",height).appendTo($(mapNode)).hide();var mapquestMap={},thisMapquestMap=mapquestMap,mapControls={},bingHouseView=null;if("mapquest"==provider){if(mapquestMap=new MQA.TileMap({elt:mapquestNode,zoom:Number(mapZoomLevel)+mapquestZoomAdjust,latLng:new MQA.LatLng(centerLat,centerLng),mtype:mapViewType,bestFitMargin:0,zoomOnDoubleClick:!0}),thisMapquestMap=mapquestMap,hasMiniMap&&MQA.withModule("insetmapcontrol",function(){thisMapquestMap.addControl(new MQA.InsetMapControl({size:{width:150,height:125},zoom:3,mapType:"map",minimized:!1}),new MQA.MapCornerPlacement(MQA.MapCorner.BOTTOM_RIGHT))}),isMovable&&"poiMiniMap"!=mapName||mapquestMap._unwireDOMEvents(),"poiMiniMap"!=mapName){var startX=0,startY=0,endX=0,endY=0,drawLeft=0,drawWidth=0,drawTop=0,drawHeight=0,aspectRatio=height/width,w=mapquestMap.getSize().width+1,h=mapquestMap.getSize().height+1,coverOffX=parseInt($(baseNode).position().left),coverOffY=parseInt($(baseNode).position().top),mouseIsDown=!1,tmpBlockDiv=document.createElement("div");$(tmpBlockDiv).attr("id","blockDiv").addClass("wntTmpBlockDiv"),$(mapquestNode).append(tmpBlockDiv);var tmpCursorCoverDiv=document.createElement("div");$(tmpCursorCoverDiv).attr("id","cursorCoverDiv").addClass("wntCursorCoverDiv"),$(mapquestNode).append(tmpCursorCoverDiv),$(tmpCursorCoverDiv).bind("mousedown",function(a){a.preventDefault()}),$(mapquestNode).mousedown(function(a){"zoom"!=dragType||mapIsLoading||map._dragZoomMouseDown(a)}),$(mapquestNode).mouseup(function(a){"zoom"!=dragType||mapIsLoading||map._dragZoomMouseUp(a)}),$(mapquestNode).mousemove(function(a){"zoom"!=dragType||mapIsLoading||map._dragZoomMouseMove(a)})}MQA.EventManager.addListener(mapquestMap,"zoomend",this.onZoomEnd),MQA.EventManager.addListener(mapquestMap,"moveend",this.onMoveEnd),MQA.EventManager.addListener(mapquestMap,"movestart",this.onMoveStart),MQA.EventManager.addListener(mapquestMap,"dragend",this.onDragEnd),allowMouseWheel&&MQA.withModule("mousewheel",function(){thisMapquestMap.enableMouseWheelZoom()}),showView&&MQA.withModule("viewoptions",function(){void 0==mapControls.view&&(mapControls.view=new MQA.ViewOptions,thisMapquestMap.addControl(mapControls.view))}),showZoom&&MQA.withModule("largezoom",function(){void 0==mapControls.zoom&&(mapControls.zoom=new MQA.LargeZoom,thisMapquestMap.addControl(mapControls.zoom,new MQA.MapCornerPlacement(MQA.MapCorner.TOP_LEFT,new MQA.Size(5,5))))})}"undefined"!=typeof bingLibraryLoaded&&bingLibraryLoaded&&hasHouseView&&($(bingMapNode).show(),bingHouseView=new VEMap(bingMapNode.id),bingHouseView.LoadMap(new VELatLong(centerLat,centerLng),houseViewZoomLevel,VEMapStyle.Birdseye),bingHouseView.HideDashboard(),bingHouseView.SetCenter(new VELatLong(centerLat,centerLng)),bingHouseView.AttachEvent("onkeydown",function(a){return a.keyCode>40||a.keyCode<37}),bingHouseView.AttachEvent("onkeyup",function(a){return a.keyCode>40||a.keyCode<37}),bingHouseView.AttachEvent("onkeypress",function(a){return a.keyCode>40||a.keyCode<37}),bingHouseView.AttachEvent("onendzoom",function(a){map.onZoomEnd()}),bingHouseView.AttachEvent("onobliquechange",function(a){map._orientationChanged()}),window.setInterval(function(){map._houseViewClientHandler()},500),navigator.userAgent.indexOf("Firefox/3.5")!=-1&&bingMapNode.addEventListener("DOMMouseScroll",function(a){return a.stopPropagation(),a.preventDefault(),a.cancelBubble=!1,!1},!1),$(bingMapNode).hide());var googleStreetView=null,googleStreetViewClient=null;if(hasStreetView){var streetViewLocation=new google.maps.LatLng(centerLat,centerLng);googleStreetViewClient=new google.maps.StreetViewService,googleStreetViewClient.getPanoramaByLocation(streetViewLocation,50,function(a){map._streetViewClientHandler(a)})}isHouseViewAvailable=!1,this.setMapView();var $bindingFields={centerLat:$("[data-wnt-map-name="+mapName+"][data-wnt-map-bind=centerLat]"),centerLng:$("[data-wnt-map-name="+mapName+"][data-wnt-map-bind=centerLng]"),mapType:$("[data-wnt-map-name="+mapName+"][data-wnt-map-bind=mapType]"),lrLat:$("[data-wnt-map-name="+mapName+"][data-wnt-map-bind=lrLat]"),lrLng:$("[data-wnt-map-name="+mapName+"][data-wnt-map-bind=lrLng]"),ulLat:$("[data-wnt-map-name="+mapName+"][data-wnt-map-bind=ulLat]"),ulLng:$("[data-wnt-map-name="+mapName+"][data-wnt-map-bind=ulLng]"),zoom:$("[data-wnt-map-name="+mapName+"][data-wnt-map-bind=zoom]"),mapViewType:$("[data-wnt-map-name="+mapName+"][data-wnt-map-bind=mapViewType]"),mapDragType:$("[data-wnt-map-name="+mapName+"][data-wnt-map-bind=mapDragType]"),allowMouseWheel:$("[data-wnt-map-name="+mapName+"][data-wnt-map-bind=allowMouseWheel]")};switch(this.setMapBindings(),$(mapNode).data("map",this),hasStartingRect&&(this.zoomToRect(startingRect.tlLat,startingRect.tlLng,startingRect.brLat,startingRect.brLng),""!=persistedMapScale&&this.zoomTo(persistedMapScale)),mapViewType){case"map":this.setMapView();break;case"hyb":this.setHybridView();break;case"sat":this.setSatView();break;case"house":window.setTimeout(function(){map.setHouseView()},2e3);break;case"street":window.setTimeout(function(){map.setStreetView()},2e3)}return hasPOIIcon&&this.addPoi(this.poi(poiIcon.lat,poiIcon.lng,this.mapIcon(poiIcon.icon,21,23))),this.setupMouseControls(),$(mapNode).bind("currentView mapControlChanged",_persistMapControl),void 0!==mapName&&"poiMiniMap"!=mapName&&("move"==map.getDragType()?map.setDragMove(!1):map.setDragZoom(!1)),$(map).bind("moveEnd zoomEnd",mapTrack),mapTrack(),this},getParam=function(a,b,c){var d;if(d=void 0===a?void 0!==b?b:"":a,void 0===c&&void 0!==b&&(c=typeof b),void 0!==c)switch(c){case"boolean":if("boolean"!=typeof d)switch(d){case 1:case"true":case"yes":case"y":d=!0;break;default:d=!1}break;case"number":"number"!=typeof d&&(d=new Number(d))}return d},mapTracksGlobals={MAP_ID:0,CONTROL_ID:0},methods={init:function(a){return this.each(function(){var b=new MapTracks;b.createMap(this);var c=$("#"+a.mapId),d=a.houseoverData||[];methods.pinHouseovers.call(this,c,d,a.houseoverIcon),methods.autoSizeMap.call(this,c),$(window).resize(methods.responsiveMaps)})},pinHouseovers:function(a,b,c){var d=a.data("map");for(var e in b){var f=b[e].lat,g=b[e].lng;if((0!==f||0!==g)&&(!isNaN(f)||!isNaN(g))&&(""!==f||""!==g)&&f>=-180&&f<=180&&g>=-180&&g<=180){var h=d.mapIcon(c,20,20),i=d.poi(f,g,h,b[e].content,b[e].propertyId,b[e].propertyUrl),j=50;f>=d.getBounds().lr.lat-j&&f<=d.getBounds().ul.lat+j&&g>=d.getBounds().lr.lng-j&&g<=d.getBounds().ul.lng+j&&d.addPoi(i)}}},responsiveMaps:function(){$(".wolfnet_wntMainMap").each(function(){methods.autoSizeMap.call(this,$(this))})},autoSizeMap:function(a){var b=a.parent().width(),c=a.data("map");if("undefined"!=typeof c){var d=c.getSize().width,e=c.getSize().height;d!=b&&c.setSize(b,e),c.bestFit()}}};$.fn[pluginName]=function(a){return methods[a]?methods[a].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof a&&a?void $.error("Method "+a+" does not exist on jQuery."+pluginName):methods.init.apply(this,arguments)}}(jQuery);
//# sourceMappingURL=jquery.wolfnetMaptracks.min.js.map