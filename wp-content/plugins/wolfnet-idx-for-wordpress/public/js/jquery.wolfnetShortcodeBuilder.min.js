"function"!==typeof String.prototype.trim&&(String.prototype.trim=function(){return this.replace(/^\s+|\s+$/g,"")});
jQuery(function(c){var b=null,i=null,f=null,h=null,g={agent:{title:"Agent Pages",action:"wolfnet_scb_options_agent",shortcode:"wnt_agent"},feat:{title:"Featured Listings",action:"wolfnet_scb_options_featured",shortcode:"wnt_featured"},grid:{title:"Listing Grid",action:"wolfnet_scb_options_grid",shortcode:"wnt_grid"},list:{title:"Property List",action:"wolfnet_scb_options_list",shortcode:"wnt_list"},srch:{title:"Quick Search",action:"wolfnet_scb_options_quicksearch",shortcode:"wnt_search"}},n=function(a){if(b==
null||typeof b!=="jQuery"){b=c("<div>").dialog({modal:true,autoOpen:false,height:600,width:600,title:"WolfNet Shortcode Builder",close:function(){j("menu");b.find("form").trigger("reset")},dialogClass:a.useDialogClass=="true"?"wolfnet_dialog":""});m();h=c('<div id="wolfnetShortcodeBuilder_loader" />').hide().appendTo(b).css({position:"absolute",top:0,left:0,width:"100%",height:"100%",backgroundColor:"white",opacity:0.5});c('<img src="'+wolfnet_ajax.loaderimg+'" />').appendTo(h).css({display:"block",
position:"absolute",left:"49%",top:"49%"})}},m=function(){c.ajax({url:ajaxurl,type:"GET",dataType:"json",async:false,data:{action:"wolfnet_scb_showagentfeature"},success:function(a){a==false&&delete g.agent}});var a="",d;for(d in g){a=a+'<button class="button" style="display:block;width:75%;margin: 0px auto 10px auto;" ';a=a+('wolfnet:id="'+d+'"');a=a+">";a=a+g[d].title;a=a+"</button>"}f=c('<div id="wolfnetShortcodeBuilder_menu"/>').append(a).appendTo(b);c('<button id="wolfnetShortcodeBuilder_back" class="button">Back</button>').prependTo(b).hide().click(function(){j("menu")});
f.find("button").click(function(){var a=c(this).attr("wolfnet:id");j(a)})},j=function(a){b.find("div#wolfnetShortcodeBuilder_"+a).length==0&&o(a);f.hide();if(a!="menu"){b.find("button#wolfnetShortcodeBuilder_back").show();b.dialog({title:"WolfNet Shortcode Builder - "+g[a].title})}else{b.find("button#wolfnetShortcodeBuilder_back").hide();b.dialog({title:"WolfNet Shortcode Builder"})}f=b.find("div#wolfnetShortcodeBuilder_"+a).show();f.find(".modeField input").trigger("ready")},o=function(a){var d=
c('<div id="wolfnetShortcodeBuilder_'+a+'"/>').appendTo(b).hide();c.ajax({url:ajaxurl,data:{action:g[a].action},success:function(b){var e=c("<form />").attr("wolfnet:sc",g[a].shortcode).append(b).append(c('<button type="submit" class="button button-primary">Insert</button>')).submit(function(a){a.preventDefault();p.call(e);return false}).appendTo(d);wolfnet.initMoreInfo(e.find(".wolfnet_moreInfo"));switch(a){case "grid":case "list":e.wolfnetListingGridControls();break;case "feat":e.wolfnetFeaturedListingsControls()}},
beforeSend:function(){h.show()},complete:function(){h.hide()}})},p=function(){q.call(this,function(a){i!=null&&i.execCommand("mceInsertContent",false,a);b.dialog("close")})},q=function(a){var d={},b="["+this.attr("wolfnet:sc")+" /]",e=["mode","savedsearch","criteria"],g=this.find('input[type="radio"][name="mode"][value="advanced"]:first:checked'),f=this.find('select[name="savedsearch"]:first');this.find("input, select").each(function(){if(this.name!=""&&c.inArray(this.name,e)==-1)switch(this.type){default:this.value.trim()!=
""&&(d[this.name]=this.value.trim());break;case "checkbox":case "radio":if(this.checked==true)d[this.name]=this.value}});if(g.length!=0&&f.length!=0){delete d.zipcode;delete d.city;delete d.minprice;delete d.maxprice;c.ajax({url:ajaxurl,type:"GET",dataType:"json",data:{action:"wolfnet_scb_savedsearch",id:f.val()},success:function(c){for(var e in c)d[e]=c[e];l(d,b,a)},beforeSend:function(){h.show()},complete:function(){h.hide()}})}else l(d,b,a)},l=function(a,d,b){for(var c in a)d=d.replace("/]"," "+
c+'="'+a[c]+'" /]');b(d)},k={init:function(a){var b={useDialogClass:true};c.extend(b,a||{});loaderUri=b.loaderUri||null;n(b)},open:function(a){b.dialog("open");i=a||window.tineyMCE||null}};c.fn.wolfnetShortcodeBuilder=function(a){if(k[a])return k[a].apply(this,Array.prototype.slice.call(arguments,1));if(typeof a==="object"||!a)return k.init.apply(this,arguments);c.error("Method "+a+" does not exist in jQuery.wolfnetShortcodeBuilder")};c(document).wolfnetShortcodeBuilder({useDialogClass:wolfnet_ajax.useDialogClass||
"true"})});
